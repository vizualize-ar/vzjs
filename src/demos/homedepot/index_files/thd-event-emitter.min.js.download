(function(e,t){typeof define=="function"&&define.amd?define("thd-event-emitter",[],function(){return t(e)}):e.EventEmitter=t(e)})(this,function(e){var t=function n(){n.prototype._EventEmitterEvents={},n.prototype._EventEmitterEventsComplete={}};return t.extend=function(e){t.call(e);for(var n in t.prototype)e.prototype[n]=t.prototype[n]},t.prototype.on=function(e,t){var n;e.indexOf(".")===-1&&(e+=".default"),n=e.split(".")[0],typeof this._EventEmitterEvents[e]=="undefined"&&(this._EventEmitterEvents[e]=[]);var r=Object.keys(this._EventEmitterEventsComplete).map(function(e){return e?e.split(".")[0]:""}),i=Object.keys(this._EventEmitterEventsComplete);if(r.indexOf(n)!==-1){for(var s=0;s<i.length;s++){var o=i[s],u=o.split(".");if(u[0]===n)try{t.apply(this,this._EventEmitterEventsComplete[i[s]])}catch(a){typeof console!="undefined"&&console.trace&&console.trace(a)}}this.off(e,this._EventEmitterEventsComplete[n]),typeof this._EventEmitterEvents[e]=="undefined"&&(this._EventEmitterEvents[e]=[]),this._EventEmitterEvents[e].push(t)}else if(Object.keys(this._EventEmitterEventsComplete).indexOf(e)!==-1){try{t.apply(this,this._EventEmitterEventsComplete[e])}catch(a){typeof console!="undefined"&&console.trace&&console.trace(a)}this.off(e,this._EventEmitterEventsComplete[e]),typeof this._EventEmitterEvents[e]=="undefined"&&(this._EventEmitterEvents[e]=[]),this._EventEmitterEvents[e].push(t)}else this._EventEmitterEvents[e].push(t);return this},t.prototype.off=function(e,t){if(!e){var n=Object.keys(this._EventEmitterEvents),r,i=n.length;for(r=0;r<i;r++)e=n[r],this._EventEmitterEvents[e]=null,delete this._EventEmitterEvents[e],this._EventEmitterEventsComplete[e]=null,delete this._EventEmitterEventsComplete[e];return}e.indexOf(".")===-1&&(e+=".default");if(typeof t=="undefined"){this._EventEmitterEvents[e]=null,delete this._EventEmitterEvents[e],this._EventEmitterEventsComplete[e]=null,delete this._EventEmitterEventsComplete[e];return}t=""+t;var s=function(t,n,r){if(!t[n])return;for(var i=0;i<t[n].length;i++){var s=""+t[n][i];if(r===s||s==="[object Object]"){t[n].splice(i,1);if(t[n].length===0){delete t[n];break}}}};return s(this._EventEmitterEvents,e,t),s(this._EventEmitterEventsComplete,e,t),this},t.prototype.trigger=function(e){var t=this,n=function(e,n){if(!t._EventEmitterEvents[e])return;var r=t._EventEmitterEvents[e];n.shift();for(var i=0;i<r.length;i++){var s=r[i];try{s.apply(t,n)}catch(o){typeof console!="undefined"&&console.trace&&console.trace(o)}}return!0},r,i=[].slice.apply(arguments);for(var s in this._EventEmitterEvents){var o=new RegExp("^"+e+".");o.test(s)&&(r=n(s,i.slice()))}if(!r){i.shift();var u;e.indexOf(".")===-1?u=e+".default":u=e,this._EventEmitterEventsComplete[u]=i}},t});